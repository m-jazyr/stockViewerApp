<html>

<head> </head>

<body>
  <div id="container" style="width: 100%; height: 100%">
  </div>
  <script src="https://code.highcharts.com/stock/highstock.js"></script>
  <script src="https://code.highcharts.com/stock/modules/data.js"></script>
  <script>
    document.addEventListener('message', function (stockData) {
      const test = JSON.parse(stockData.data)
      Highcharts.stockChart('container', {
        title: {
          text: `${test.symbol} stock chart`,
        },

        subtitle: {
          text: 'Using ordinal X axis',
        },

        xAxis: {
          gapGridLineWidth: 0,
        },

        rangeSelector: {
          buttonPosition: {
            align: 'right'
          },
          buttons: [{
            type: 'day',
            count: 1,
            text: '1D'
          }, {
            type: 'month',
            count: 1,
            text: '1m'
          }, {
            type: 'year',
            count: 1,
            text: '1y'
          }, {
            type: 'all',
            text: 'All'
          }],
          selected: 4,
          inputEnabled: false
        },

        series: [
          {
            name: 'AAPL',
            type: 'area',
            data: test.chartData,
            gapSize: 5,
            tooltip: {
              valueDecimals: 2,
            },
            fillColor: {
              linearGradient: {
                x1: 0,
                y1: 0,
                x2: 0,
                y2: 1,
              },
              stops: [
                [0, Highcharts.getOptions().colors[0]],
                [
                  1,
                  Highcharts.color(Highcharts.getOptions().colors[0])
                    .setOpacity(0)
                    .get('rgba'),
                ],
              ],
            },
            threshold: null,
          },
        ],
      });
    });
  </script>
</body>

</html>